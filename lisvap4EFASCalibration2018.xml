<!--
#######################################################

  ##       ####  ######  ##     ##    ###    ########  
  ##        ##  ##    ## ##     ##   ## ##   ##     ## 
  ##        ##  ##       ##     ##  ##   ##  ##     ## 
  ##        ##   ######  ##     ## ##     ## ########  
  ##        ##        ##  ##   ##  ######### ##        
  ##        ##  ##    ##   ## ##   ##     ## ##        
  ######## ####  ######     ###    ##     ## ##  
  
#######################################################

TEMPLATE SETTINGS FILE LISVAP EVAPORATION PRE-PROCESSOR
author PB, 29 October 2012

TIP:
You can use $(ProjectDir) as built-in variable to use in XML settings or in code (binding['ProjectDir'])
-->

<lfsettings>

    <lfuser>
        <group>

            <comment>
                **************************************************************
                TIME-RELATED CONSTANTS
                **************************************************************
            </comment>

            <textvar name="CalendarDayStart" value="02/01/1990 06:00">
                <comment>
                    calendar day number of 1st day in model run
                    e.g. 1st of January: 1; 1st of June: 151 (or 152 in leap year)
                </comment>
            </textvar>

            <textvar name="DtSec" value="86400">
                <comment>
                    time step [seconds] ALWAYS USE 86400!!
                </comment>
            </textvar>

            <textvar name="StepStart" value="02/01/1990 06:00">
                <comment>
                    Number of first time step in simulation
                </comment>
            </textvar>

            <textvar name="StepEnd" value="01/03/1990 06:00">
                <comment>
                    Number of last time step
                </comment>
            </textvar>

            <textvar name="ReportSteps" value="1..10227">
                <comment>
                </comment>
            </textvar>


        </group>

        <group>

            <comment>
                **************************************************************
                SPECIAL FLAGS AND SWITCHES
                **************************************************************
            </comment>

            <textvar name="TemperatureInKelvinFlag" value="0">
                <comment>
                    Flag that is 1 if input temperatures (TMax, TMin, TDew) are in Kelvin,
                    and 0 if they are in deg C
                </comment>
            </textvar>

        </group>

        <group>

            <comment>
                **************************************************************
                FILE PATHS
                **************************************************************
            </comment>

            <textvar name="PathOut" value="/H07_floods/LisvapTest/out2019">
                <comment>
                    Output path
                </comment>
            </textvar>

            <textvar name="PathBaseMapsIn" value="/home/efas/Lisvap4EFAS/mapsLisvap/">
                <comment>
                    Path to input base maps
                </comment>
            </textvar>

            <textvar name="PathMeteoIn" value="/H07_floods/Europe_Gridded_Meteo_Data/Europe_grids_2017/">
                <comment>
                    Path to input raw meteo maps
                    E:/lisflood_test/LisvapWorld/meteo/raster
                </comment>
            </textvar>

        </group>


        <group>

            <comment>
                **************************************************************
                PREFIXES OF INPUT METEO VARIABLES
                **************************************************************
            </comment>

            <textvar name="PrefixTMax" value="tx">
                <comment>
                    prefix maximum temperature maps [k]
                </comment>
            </textvar>

            <textvar name="PrefixTMin" value="tn">
                <comment>
                    prefix minimum temperature maps [K]
                </comment>
            </textvar>

            <textvar name="PrefixEAct" value="pd">
                <comment>
                    prefix vapour pressure maps
                    --- MISSING ---
                </comment>
            </textvar>

            <textvar name="PrefixWind" value="ws">
                <comment>
                    prefix wind speed maps at 10m [m/s]
                </comment>
            </textvar>

            <textvar name="PrefixRgd" value="rg">
                <comment>
                    prefix down solar radiation maps [W/m2]
                </comment>
            </textvar>

        </group>

        <group>

            <comment>
                **************************************************************
                PREFIXES OF OUTPUT METEO VARIABLES
                **************************************************************
            </comment>

            <textvar name="PrefixE0" value="e0">
                <comment>
                    prefix E0 maps
                </comment>
            </textvar>

            <textvar name="PrefixES0" value="es">
                <comment>
                    prefix ES0 maps
                </comment>
            </textvar>

            <textvar name="PrefixET0" value="et">
                <comment>
                    prefix ET0 maps
                </comment>
            </textvar>

        </group>


    </lfuser>

    <lfoptions>

        <setoption name="useRgdMaps" choice="1"></setoption>
        <setoption name="useRNMaps" choice="0"></setoption>

        <setoption name="readNetcdfStack" choice="1"></setoption>
        <setoption name="writeNetcdfStack" choice="1"></setoption>

        <setoption name="repE0Maps" choice="1"></setoption>
        <setoption name="EFAS" choice="1"></setoption>
        <setoption name="CORDEX" choice="0"></setoption>

    </lfoptions>


    <lfbinding>
        <!--
        **************************************************************
        **************************************************************
        LFBINDING: MORE LOW-LEVEL CONTROL OVER IN- AND OUTPUT
        **************************************************************
        **************************************************************
        -->

        <group>

            <comment>
                **************************************************************
                TIMESTEP RELATED PARAMETERS
                **************************************************************
            </comment>

            <textvar name="CalendarDayStart" value="$(CalendarDayStart)">
                <comment>
                    calendar day number of 1st day in model run
                    e.g. 1st of January: 1; 1st of June 151 (or 152 in leap year)
                </comment>
            </textvar>

            <textvar name="DtSec" value="$(DtSec)">
                <comment>
                    timestep [seconds]
                </comment>
            </textvar>

            <textvar name="StepStart" value="$(StepStart)">
                <comment>
                    Number of first time step in simulation
                </comment>
            </textvar>

            <textvar name="StepEnd" value="$(StepEnd)">
                <comment>
                    Number of last time step
                </comment>
            </textvar>

        </group>

        <group>

            <comment>
                **************************************************************
                SPECIAL FLAGS AND SWITCHES
                **************************************************************
            </comment>

            <textvar name="TemperatureInKelvinFlag" value="$(TemperatureInKelvinFlag)">
                <comment>
                    Flag that is 1 if input temperatures (TMax, TMin, TDew) are in Kelvin,
                    and 0 if they are in deg C
                </comment>
            </textvar>

        </group>

        <group>
            <comment>
                **************************************************************
                CONSTANTS
                **************************************************************
            </comment>


            <textvar name="AvSolarConst" value="1370">
                <comment>
                    Average solar radiation at top atmosphere [J/m2/s] (I.E.A. 1978)
                </comment>
            </textvar>

            <textvar name="StefBolt" value="4.903E-3">
                <comment>
                    Stefan-Boltzmann constant [J/m2/K4/day]
                </comment>
            </textvar>

            <textvar name="Press0" value="1013">
                <comment>
                    Atmosheric pressure at sea level [mbar]
                </comment>
            </textvar>

            <textvar name="PD" value="-2.65">
                <comment>
                    Correction constant in daylength formula [degrees]
                </comment>
            </textvar>

            <textvar name="AlbedoSoil" value="0.15">
                <comment>
                    Albedo of bare soil surface (Supit et. al.)
                </comment>
            </textvar>

            <textvar name="AlbedoWater" value="0.05">
                <comment>
                    Albedo of water surface (Supit et. al.)
                </comment>
            </textvar>

            <textvar name="AlbedoCanopy" value="0.23">
                <comment>
                    Albedo of vegetation canopy (FAO,1998)
                </comment>
            </textvar>

            <textvar name="FactorSoil" value="0.75">
                <comment>
                    Estimated value for surface roughness factor of bare soil (Supit et. al.)
                </comment>
            </textvar>

            <textvar name="FactorWater" value="0.5">
                <comment>
                    Estimated value for surface roughness factor of water surface (Supit et. al.)
                </comment>
            </textvar>

            <textvar name="FactorCanopy" value="1">
                <comment>
                    Estimated value for surface roughness factor of vegetation canopy (Supit et. al.)
                </comment>
            </textvar>

        </group>

        <group>
            <comment>
                **************************************************************
                INPUT METEOROLOGICAL TIMESERIES AS MAPS
                **************************************************************
            </comment>

            <textvar name="TMaxMaps" value="$(PathMeteoIn)/EMO-5-tx_1990_2017">
                <comment>
                    Maximum daily temperature [K]
                </comment>
            </textvar>

            <textvar name="TMinMaps" value="$(PathMeteoIn)/EMO-5-tn_1990_2017">
                <comment>
                    Minimum daily temperature [K]
                </comment>
            </textvar>


            <textvar name="EActMaps" value="$(PathMeteoIn)/EMO-5-pd_1990_2017">
                <comment>
                    Actual vapour pressure [mbar]

                </comment>
            </textvar>

            <textvar name="WindMaps" value="$(PathMeteoIn)/EMO-5-ws_1990_2017">
                <comment>
                    Wind speed at 10 m from surface [m/s]
                </comment>
            </textvar>

            <textvar name="RgdMaps" value="$(PathMeteoIn)/EMO-5-rg_1990_2017">
                <comment>
                    rgd - calculated solar radiation [W/m2]
                </comment>
            </textvar>
            <textvar name="TAvgMaps" value="$(PathMeteoIn)/ta/ta_1990_2017">
                <comment>
                    average daily temperature [C or K]
                </comment>
            </textvar>
            <textvar name="PSurfMaps" value="0">
                <comment>
                    Instantaneous sea level pressure [Pa]
                </comment>
            </textvar>


        </group>

        <group>
            <comment>
                **************************************************************
                REPORTED OUTPUT MAPS
                **************************************************************
            </comment>

            <textvar name="E0Maps" value="$(PathOut)/$(PrefixE0)">
                <comment>
                    daily reference evaporation (free water) [mm/day]
                </comment>
            </textvar>

            <textvar name="ES0Maps" value="$(PathOut)/$(PrefixES0)">
                <comment>
                    daily reference evaporation (soil) [mm/day]
                </comment>
            </textvar>

            <textvar name="ET0Maps" value="$(PathOut)/$(PrefixET0)">
                <comment>
                    daily reference evapotranspiration (crop) [mm/day]
                </comment>
            </textvar>

        </group>

        <group>
            <comment>
                **************************************************************
                REPORTED OUTPUT TIME SERIES
                **************************************************************
            </comment>

            <textvar name="TAvgTS" value="$(PathOut)/tAvg.tss">
                <comment>
                    Average temperature [deg C]
                </comment>
            </textvar>

            <textvar name="ET0TS" value="$(PathOut)/et0.tss">
                <comment>
                    Potential reference evapotranspiration rate [mm/day]
                </comment>
            </textvar>

            <textvar name="E0TS" value="$(PathOut)/e0.tss">
                <comment>
                    Potential evaporation rate of a free water surface [mm/day]
                </comment>
            </textvar>

            <textvar name="ES0TS" value="$(PathOut)/es0.tss">
                <comment>
                    Potential evaporation rate from a bare soil surface [mm/day]
                </comment>
            </textvar>

        </group>

        <group>
            <comment>
                **************************************************************
                BASE INPUT MAPS
                **************************************************************
            </comment>

            <textvar name="MaskMap" value="$(PathMeteoIn)/areaall.nc">
                <comment>
                    Clone map
                </comment>
            </textvar>

            <textvar name="Dem" value="$(PathBaseMapsIn)/dem.map">
                <comment>
                    Digital elevation model [meters a.s.l.]
                </comment>
            </textvar>

            <textvar name="Lat" value="$(PathBaseMapsIn)/lat.map">
                <comment>
                    Latitude [decimal degrees]
                </comment>
            </textvar>


        </group>


    </lfbinding>

    <prolog>
        areamap MaskMap;
        timer StepStart StepEnd 1;
    </prolog>
</lfsettings>
